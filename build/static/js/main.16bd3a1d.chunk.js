(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{124:function(e,t,n){"use strict";var a=n(57),r=n.n(a),o=n(160),s=n.n(o),i=n(76),c=n(46);r.a.defaults.baseURL=i.a,r.a.defaults.timeout=i.b,r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",r.a.interceptors.request.use(function(e){return"/users/login"===e.url?e:Object(c.b)("token")?(e.headers.Authorization={token:Object(c.b)("token")},e):Promise.reject(new Error("token\u5931\u6548"))},function(e){return Promise.reject(e)}),r.a.interceptors.response.use(function(e){return e},function(e){return Promise.reject(e)}),t.a=function(e){var t=e.method,n=void 0===t?"get":t,a=e.data,o=void 0===a?{}:a;return"post"===n&&(e.data=s.a.stringify(o)),r()(e).then(function(e){return e}).catch(function(e){return e})}},186:function(e,t,n){e.exports=n(315)},19:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"g",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return u});var a="FETCH_REQUEST",r="REQUEST_SUCCESS",o="REQUEST_FAIL",s="LOGIN_SUCCESS",i="LOGIN_FAIL",c="LOGIN_OUT",u="INIT_ROUTES"},254:function(e,t,n){},311:function(e,t,n){},312:function(e,t,n){var a={"./pages/404":[42,9],"./pages/404/":[42,9],"./pages/404/index":[42,9],"./pages/404/index.js":[42,9],"./pages/dashboard":[98,9,0,1,3,4,6],"./pages/dashboard/":[98,9,0,1,3,4,6],"./pages/dashboard/components/MainChart":[177,9,0,4,19],"./pages/dashboard/components/MainChart.js":[177,9,0,4,19],"./pages/dashboard/components/NumberRow":[178,9,0,16,15],"./pages/dashboard/components/NumberRow.js":[178,9,0,16,15],"./pages/dashboard/components/TableList":[179,9,0,1,3,13,18],"./pages/dashboard/components/TableList.js":[179,9,0,1,3,13,18],"./pages/dashboard/index":[98,9,0,1,3,4,6],"./pages/dashboard/index.js":[98,9,0,1,3,4,6],"./pages/dashboard/index.less":[317,7,24],"./pages/hr/users":[99,9,12],"./pages/hr/users/":[99,9,12],"./pages/hr/users/index":[99,9,12],"./pages/hr/users/index.js":[99,9,12],"./pages/login":[97,9,0,1,2,5],"./pages/login/":[97,9,0,1,2,5],"./pages/login/LoginForm":[176,9,0,1,2,20],"./pages/login/LoginForm.js":[176,9,0,1,2,20],"./pages/login/index":[97,9,0,1,2,5],"./pages/login/index.js":[97,9,0,1,2,5],"./pages/login/login.less":[316,7,25],"./pages/sales/categories":[103,9,0,1,2,3,8],"./pages/sales/categories/":[103,9,0,1,2,3,8],"./pages/sales/categories/containers/TableList":[180,9,0,1,2,3,14],"./pages/sales/categories/containers/TableList.js":[180,9,0,1,2,3,14],"./pages/sales/categories/index":[103,9,0,1,2,3,8],"./pages/sales/categories/index.js":[103,9,0,1,2,3,8],"./pages/sales/products":[102,9,0,1,2,3,7],"./pages/sales/products/":[102,9,0,1,2,3,7],"./pages/sales/products/add":[100,9,0,1,2,3,10],"./pages/sales/products/add/":[100,9,0,1,2,3,10],"./pages/sales/products/add/index":[100,9,0,1,2,3,10],"./pages/sales/products/add/index.js":[100,9,0,1,2,3,10],"./pages/sales/products/containers/ProductForm":[175,9,0,1,2,3,17],"./pages/sales/products/containers/ProductForm.js":[175,9,0,1,2,3,17],"./pages/sales/products/detail/$id":[104,9,0,9],"./pages/sales/products/detail/$id/":[104,9,0,9],"./pages/sales/products/detail/$id/index":[104,9,0,9],"./pages/sales/products/detail/$id/index.js":[104,9,0,9],"./pages/sales/products/edit/$id":[101,9,0,1,2,3,11],"./pages/sales/products/edit/$id/":[101,9,0,1,2,3,11],"./pages/sales/products/edit/$id/index":[101,9,0,1,2,3,11],"./pages/sales/products/edit/$id/index.js":[101,9,0,1,2,3,11],"./pages/sales/products/index":[102,9,0,1,2,3,7],"./pages/sales/products/index.js":[102,9,0,1,2,3,7]};function r(e){var t=a[e];return t?Promise.all(t.slice(2).map(n.e)).then(function(){var e=t[0];return n.t(e,t[1])}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(a)},r.id=312,e.exports=r},314:function(e,t,n){},315:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),s=n.n(o),i=n(31),c=n(45),u=n(169),l=n(19),d=n(76),p=Object(i.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLogin:!1,data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.e:return{isLogin:!0,data:t.data};case l.c:return{isLogin:!1,data:{},error:t.error};case l.d:return{isLogin:!1,data:{}};default:return e}},routes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.b:return t.routes;default:return e}}}),g=n(80),f=n.n(g),m=n(69),h=n(124),b=f.a.mark(E),v=f.a.mark(y);function E(e){var t,n,a,r,o;return f.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.config,a=t.resolve,r=t.reject,s.prev=2,s.next=5,Object(m.a)(h.a,n);case 5:if(!(o=s.sent)||!o.data){s.next=12;break}return s.next=9,Object(m.b)({type:l.g,data:o.data});case 9:a(o.data),s.next=15;break;case 12:return s.next=14,Object(m.b)({type:l.f,message:o.message});case 14:r(o);case 15:s.next=22;break;case 17:return s.prev=17,s.t0=s.catch(2),s.next=21,Object(m.b)({type:l.f,message:s.t0.message});case 21:r(s.t0);case 22:case"end":return s.stop()}},b,null,[[2,17]])}function y(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.c)(l.a,E);case 2:case"end":return e.stop()}},v)}var j=y,O=n(54),x=n(56),w=n(161),k=n.n(w),S=n(162),L=function(e){var t=e.isLoading,n=e.error;return t?r.a.createElement("div",{style:{position:"fixed",left:0,top:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(S.SyncLoader,{sizeUnit:"px",size:15,color:"#4A90E2",loading:t})):n?r.a.createElement("div",{className:"loading"},"\u9875\u9762\u52a0\u8f7d\u5931\u8d25,\u8bf7\u5237\u65b0\u91cd\u8bd5"):null};function C(e){return k()(Object.assign({loading:L,delay:300},e))}n(173);var I=n(70),N=n(33),R=n(34),_=n(36),P=n(35),T=n(37),K=n(46),U=n(163),A=n(164),F=n.n(A);var M=function(e,t){return e.filter(function(e){for(var n=0;n<t.length;n++)if(t[n]===e.id)return!0;return!1})},$=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id",r=[t],o=new Map;e.forEach(function(e){return o.set(e[a],e)});return function e(t){var s=o.get(t[a])[n];s&&(r.push(o.get(s)),e(o.get(s)))}(t),r},D=(n(244),n(168)),B=(n(174),n(123)),q=(n(181),n(134)),z=(n(158),n(53)),H=(n(93),n(13)),G=(n(252),n(58)),Q=n(55),J=(n(254),function(e){var t=e.collapsed;return r.a.createElement("div",{className:"logo-wrap"},t?r.a.createElement("h2",null,"Admin"):r.a.createElement("h2",null,"\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"))}),W=function(e){function t(){var e,n;Object(N.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={selectedKeys:[],openKeys:[]},n.openChange=function(e){var t=n.props.routes.filter(function(e){return!e.menuParentId}).map(function(e){return String(e.id)}),a=e.find(function(e){return-1===n.state.openKeys.indexOf(e)}),r=e;-1!==t.indexOf(a)&&(r=a?[a]:[]),n.setState({openKeys:r})},n.handleSelect=function(e){e.item,e.key;var t=e.selectedKeys;n.setState({selectedKeys:t})},n}return Object(T.a)(t,e),Object(R.a)(t,[{key:"componentDidUpdate",value:function(e){if(!Object(Q.is)(Object(Q.List)(e.routes),Object(Q.List)(this.props.routes))||!Object(Q.is)(Object(Q.Map)(e.location),Object(Q.Map)(this.props.location))){var t=this.props,n=t.routes,a=t.location,r=n.find(function(e){return"/main"+e.path===a.pathname}),o=r?$(n,r,"menuParentId").map(function(e){return String(e.id)}):[],s=o.filter(function(e){return e.id!==r.id});this.setState({selectedKeys:o,openKeys:s})}}},{key:"render",value:function(){var e=this.props,t=e.routes,n=e.collapsed,o=n?{}:{openKeys:this.state.openKeys},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pid",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children",r=[],o={},s=Object(U.cloneDeep)(e);return s.forEach(function(e,n){o[s[n][t]]=s[n]}),s.forEach(function(e){var t=o[e[n]];t?(!t[a]&&(t[a]=[]),t[a].push(e)):r.push(e)}),r}(t,"id","menuParentId");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"logo"},r.a.createElement(J,{collapsed:n})),r.a.createElement(z.b,Object.assign({inlineCollapsed:n,theme:"dark",mode:"inline",selectedKeys:this.state.selectedKeys,onSelect:this.handleSelect,onOpenChange:this.openChange},o),function e(t){return t.map(function(t){return t.children?r.a.createElement(z.b.SubMenu,{key:t.id,title:r.a.createElement(a.Fragment,null,t.icon&&r.a.createElement(H.a,{type:t.icon}),r.a.createElement("span",null,t.title))},e(t.children)):t.hideInMenu?null:r.a.createElement(z.b.Item,{key:t.id},r.a.createElement(O.c,{to:"/main"+t.path||!1},t.icon&&r.a.createElement(H.a,{type:t.icon}),r.a.createElement("span",{className:"nav-text"},t.title)))})}(s)))}}]),t}(a.Component),X=Object(x.f)(Object(c.b)(function(e){return{routes:e.routes}},{})(W)),V=(n(309),n(122)),Y=function(e){function t(){var e,n;Object(N.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(_.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(o)))).generateBreadcrumbs=function(e){return e.map(function(t,n){var a=r.a.createElement(r.a.Fragment,null,t.icon?r.a.createElement(H.a,{type:t.icon,style:{marginRight:4}}):null,t.title);return r.a.createElement(V.a.Item,{key:n},e.length-1!==n?r.a.createElement(O.b,{to:"/main"+(t.redirect?t.redirect:t.path)},a):a)})},n}return Object(T.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.routes,n=e.location,a=t.find(function(e){return e.path&&(t="/main"+e.path,a=n.pathname,F()(t).exec(a));var t,a}),o=a?$(t,a,"breadcrumbParentId").reverse():[t[0],{id:404,name:"Not Found"}];return r.a.createElement(V.a,null,this.generateBreadcrumbs(o))}}]),t}(a.PureComponent),Z=Object(x.f)(Object(c.b)(function(e){return{routes:e.routes}})(Y)),ee=(n(311),G.a.Header),te=G.a.Content,ne=G.a.Footer,ae=G.a.Sider,re=function(e){function t(){var e,n;Object(N.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!1},n.toggle=function(){n.setState({collapsed:!n.state.collapsed})},n.onBreakpoint=function(e){n.setState({collapsed:e})},n}return Object(T.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props.userInfo,t=void 0===e?{}:e;return r.a.createElement(G.a,{className:"pageLayout"},r.a.createElement(ae,{trigger:null,collapsible:!0,collapsed:this.state.collapsed,breakpoint:"lg",onBreakpoint:this.onBreakpoint},r.a.createElement(X,{collapsed:this.state.collapsed})),r.a.createElement(G.a,null,r.a.createElement(ee,{style:{background:"#fff",padding:0}},r.a.createElement(H.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle}),r.a.createElement("div",{style:{float:"right",padding:"0 24px"}},r.a.createElement(B.a,{overlay:r.a.createElement(z.b,{mode:"horizontal"},r.a.createElement(z.b.Item,{onClick:this.props.logout},"\u9000\u51fa"))},r.a.createElement("div",null,"\u6b22\u8fce\u60a8\uff5e\uff0c",t.name,r.a.createElement(q.a,{style:{marginLeft:8},src:t.avatar}),r.a.createElement(H.a,{type:"down"}))))),r.a.createElement(te,{style:{margin:"24px 16px 0",minHeight:"auto"}},r.a.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(Z,null)),r.a.createElement(D.a,null),this.props.children)),r.a.createElement(ne,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED")))}}]),t}(a.Component),oe=n(42),se=function(e){function t(){var e,n;Object(N.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).getRoutes=function(){n.props.fetchRequest({url:"/config/routes",method:"get"}).then(function(e){if(console.log(e),e&&"OK"===e.status){var t=M(e.routes,n.props.user.data.assets);n.props.initRoutes(t)}else I.a.error(e&&e.msg||"\u83b7\u53d6\u83dc\u5355\u5931\u8d25")}).catch(function(e){console.log(e),I.a.error(e.message||"\u83b7\u53d6\u83dc\u5355\u5931\u8d25")})},n.handelLogout=function(){Object(K.a)(),n.props.logout(),n.props.history.push("/login")},n}return Object(T.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.user.isLogin)this.getRoutes();else{var t=Object(K.b)("email"),n=Object(K.b)("password");t&&n?this.props.fetchRequest({url:"/users/info",method:"get",params:{email:t,password:n}}).then(function(a){a&&"OK"===a.status?(e.props.loginSuccess(a.userInfo),Object(K.c)({email:t,password:n}),e.getRoutes()):(e.props.loginError(a),I.a.error(a.msg||"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25"),e.props.history.push("/login"))}).catch(function(t){console.log(t),e.props.loginError(t),I.a.error(t.message||"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25"),e.props.history.push("/login")}):this.props.history.push("/login")}}},{key:"render",value:function(){var e=this.props,t=e.routes,a=e.user,o=void 0===a?{}:a;return r.a.createElement("div",{className:"App"},r.a.createElement(re,{userInfo:o.data,logout:this.handelLogout},r.a.createElement(x.d,null,t.map(function(e){return function e(t){if(t.children)return t.children.map(function(t){return e(t)});var a=t.path.replace(/:/,"$");return r.a.createElement(x.b,{key:t.id,path:"/main".concat(t.path),component:C({loader:function(){return n(312)("./pages".concat(a))}}),exact:!0})}(e)}),r.a.createElement(x.b,{component:oe.default}))))}}]),t}(a.Component),ie=Object(x.f)(Object(c.b)(function(e,t){return{user:e.user,routes:e.routes}},function(e,t){return{fetchRequest:function(t){return new Promise(function(n,a){e({type:l.a,payload:{config:t,resolve:n,reject:a}})})},loginSuccess:function(t){e({type:l.e,data:t})},loginError:function(t){e({type:l.c,error:t})},initRoutes:function(t){e({type:l.b,routes:t})},logout:function(){e({type:l.d})}}})(se)),ce=function(){return r.a.createElement(O.a,null,r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/login",exact:!0,component:C({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5)]).then(n.bind(null,97))}})}),r.a.createElement(x.b,{path:"/",exact:!0,render:function(){return r.a.createElement(x.a,{to:"/main"})}}),r.a.createElement(x.b,{path:"/main",render:function(){return r.a.createElement(ie,null)}}),r.a.createElement(x.b,{path:"/404",component:oe.default}),r.a.createElement(x.a,{to:"/404"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(313),n(314);var ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,le=Object(u.a)(),de=Object(i.e)(p,ue(Object(i.a)(le)));le.run(j),s.a.render(r.a.createElement(c.a,{store:de},r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a);t.default=function(){return r.a.createElement("div",{style:{width:"100%",height:"100%"}},r.a.createElement("img",{style:{width:"100%",height:"100%"},src:"./assets/image/404pic.svg",alt:"404"}))}},46:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)localStorage.setItem(t,e[t])},r=function(e){return localStorage.getItem(e)},o=function(){localStorage.clear()}},76:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o});var a=window.location.origin+"/api/",r=1e4,o=[{id:1,icon:"dashboard",title:"\u4eea\u8868\u76d8",path:"/dashboard"}]}},[[186,22,23]]]);
//# sourceMappingURL=main.16bd3a1d.chunk.js.map